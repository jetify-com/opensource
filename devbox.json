{
  "packages": [
    "go@latest",
    "golangci-lint@latest"
  ],
  "env": {
	  "AR": "/usr/bin/ar",
	  "AS": "/usr/bin/as",
	  "CC": "/usr/bin/cc",
	  "CXX": "/usr/bin/cxx",
	  "LD": "/usr/bin/ld",
	  "NM": "/usr/bin/nm"
  },
  "shell": {
    "init_hook": [
      "echo 'Welcome to devbox!' > /dev/null"
    ],
    "scripts": {
      "go-mod-sync": [
        "find . -maxdepth 4 -type f -name go.mod -execdir go mod tidy \\;",
        "go work sync"
      ],
      "build": "find . -maxdepth 4 -type f -name go.mod -execdir go build -v ./... \\;",
      "lint": "find . -maxdepth 4 -type f -name go.mod -exec dirname {} \\; | xargs -I {} bash -c \"cd '{}' && golangci-lint run --timeout 300s\"",
      "test": "find . -maxdepth 4 -type f -name go.mod -execdir go test -v ./... \\;"
    }
  }
}
